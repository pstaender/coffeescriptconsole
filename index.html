<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>coffeescript console</title>
  <link rel="stylesheet" type="text/css" href="css/csc.css" />
  <script type="text/javascript" src="javascripts/lib/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/lib/coffee-script.js"></script>
  <script type="text/javascript" src="javascripts/lib/store.min.js"></script>
  <script type="text/javascript" src="javascripts/csc.js"></script>
  <script type="text/javascript">
  var usage = function() {
    var s = '# CoffeeScriptConsole\n\n';
    s += '  * press `shift+enter` to insert new line(s)\n';
    s += '  * press `keyup`/`keydown` to browse through history\n';
    s += '  * use `echo()` instead of `console.log()` to echo\n'
    s += '  * `clearHistory()` clears console history\n'
    s += '  * `clear()` clears screen\n'
    s += '  * `echoEvalOutput(true|false)` echo result of executed code\n'
    return s;
  }

  $(window).ready(function(){
    var csc = new CoffeeScriptConsole({
      $input: $('#consoleInput'),
      $output: $('#consoleOutput'),
      suggestions: 'usage(),clearHistory(),clearScreen(),echoEvalOutput(true),echo,clear()'.split(',')
    });
    window.puts = window.echo = function(output) {
      csc.echo(output);
    };
    window.clearHistory = function() {
      csc.clearHistory();
    }
    window.clear = function() {
      window.clearScreen();
      csc.clearOutputHistory();
    }

    window.clearScreen = function() {
      csc.$output.html('');
    }

    window.echoEvalOutput = function(trueOrFalse) {
      if (typeof trueOrFalse === 'boolean') {
        csc.echoEvalOutput = trueOrFalse;
        if (store)
          store.set('echoEvalOutput', trueOrFalse);
      }
    }

    window.load = function(url, cb) {
      return $.getScript(url, cb);
    }

    if (store) {
      window.echoEvalOutput(store.get('echoEvalOutput'));
    }
  });
  </script>
</head>
<body>
  <div id="main">
    <textarea id="consoleInput" class="consoleTypo" autofocus="autofocus">usage() # press enter</textarea>
    <div id="consoleOutput">
    </div>
  </div>
</body>
</head>
